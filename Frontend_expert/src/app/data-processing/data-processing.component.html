<body>
  <div *ngIf="dataProcessed" class="processing-container">
    <div class="loading" *ngIf="!dataProcessed">
      <div class="loader"></div>
      <div class="loading-text">Please wait... <br> We are processing your data</div>
    </div>
    <div class="intro-container">
      <h2>Welcome to the Data Processing Step!</h2>
      <p class="intro-text">In this step, we performed PFI : <br></p>
      <p class="intro-text">Permutation Feature Importances (PFI) measure the importance of each feature in a machine learning model by randomly permuting the values of that feature and observing the impact on the model's performance. It helps identify the most influential features in the model.</p>
      <p class="intro-text">For more information on PFI, you can check out this <a href="https://www.kaggle.com/dansbecker/permutation-importance" target="_blank">Explanation</a>.</p>
    </div>

    <div class="processing">
      <table class="center-table">
        <thead>
          <tr>
            <th>Feature</th>
            <th>Importance</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Curricular units approved 1st sem</td>
            <td>0.17058823529411768</td>
          </tr>
          <tr>
            <td>Curricular units approved 2nd sem</td>
            <td>0.12352941176470592</td>
          </tr>
          <tr>
            <td>Unemployment rate</td>
            <td>0.05294117647058825</td>
          </tr>
          <tr>
            <td>Mother's occupation</td>
            <td>0.02941176470588236</td>
          </tr>
          <tr>
            <td>Inflation rate</td>
            <td>0.02941176470588236</td>
          </tr>
          <tr>
            <td>Mother's qualification</td>
            <td>0.02352941176470589</td>
          </tr>
          <tr>
            <td>Father's qualification</td>
            <td>0.017647058823529415</td>
          </tr>
          <tr>
            <td>Father's occupation</td>
            <td>0.011764705882352944</td>
          </tr>
        </tbody>
      </table>
      <br>
    </div>

    <div class="time-taken">
      <i class="fa fa-hourglass-half"></i>
      <div class="time">
        <span class="time-label">Time Taken:</span>
        <span class="time-value">{{ time_taken }} ms</span>
      </div>
    </div>

    <div class="comment-section">
      <label for="comment">Add a comment:</label>
      <textarea id="comment" rows="5" [(ngModel)]="comment" placeholder="You can add here your observations for the data preprocessing results. The PFI results provided can help you build your observations."></textarea>
    </div>
    
    <div class="button-container">
      <button class="comment-button" (click)="submitForm()" [disabled]="error || !dataProcessed">Submit Comment</button>
      <button class="next-button" routerLink="/algorithms" [disabled]="!dataProcessed">NEXT</button>
      <button class="back-button" routerLink="/datavisualisation">Back</button>
      <button class="retry-button" (click)="retry()">Try Again</button>
    </div>

    <div *ngIf="error" class="error">{{ error }}</div>
  </div>
</body>
